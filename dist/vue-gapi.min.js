/*!
 * vue-gapi v0.0.1
 * (c) 2018 Cedrik1712
 * Released under the MIT License.
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.VueGapi=e.VueGapi||{})}(this,function(e){"use strict";var t=window.gapi=window.gapi||{};t._bs=(new Date).getTime(),function(){var e,t=window,o=document,i=t.location,s=function(){},r=/\[native code\]/,n=function(e,t,o){return e[t]=e[t]||o},a=function(){var e;if((e=Object.create)&&r.test(e))e=e(null);else for(var t in e={})e[t]=void 0;return e},l=n(t,"gapi",{});e=n(t,"___jsl",a()),n(e,"I",0),n(e,"hel",10);var c=function(){var t=i.href;if(e.dpo)var o=e.h;else{o=e.h;if(t=t&&(/([#].*&|[#])jsh=([^&#]*)/g.exec(t)||/([?#].*&|[?#])jsh=([^&#]*)/g.exec(t)))try{o=decodeURIComponent(t[2])}catch(e){}}return o},u=function(t){return n(n(e,"H",a()),t,a())},p=n(e,"perf",a()),g=n(p,"g",a()),h=n(p,"i",a());n(p,"r",[]),a(),a();var d=function(e,t,o){var i=p.r;"function"==typeof i?i(e,t,o):i.push([e,t,o])},f=function(e,t,o){t&&0<t.length&&(t=m(t),o&&0<o.length&&(t+="___"+m(o)),28<t.length&&(t=t.substr(0,28)+(t.length-28)),o=t,t=n(h,"_p",a()),n(t,o,a())[e]=(new Date).getTime(),d(e,"_p",o))},m=function(e){return e.join("__").replace(/\./g,"_").replace(/\-/g,"_").replace(/,/g,"_")},_=a(),w=[],v=function(e){throw Error("Bad hint"+(e?": "+e:""))};w.push(["jsl",function(t){for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=t[o];"object"==typeof i?e[o]=n(e,o,[]).concat(i):n(e,o,i)}(o=t.u)&&((t=n(e,"us",[])).push(o),(o=/^https:(.*)$/.exec(o))&&t.push("http:"+o[1]))}]);var b=/^(\/[a-zA-Z0-9_\-]+)+$/,y=[/\/amp\//,/\/amp$/,/^\/amp$/],x=/^[a-zA-Z0-9\-_\.,!]+$/,I=/^gapi\.loaded_[0-9]+$/,k=/^[a-zA-Z0-9,._-]+$/,S=function(e){"/"!==e.charAt(0)&&v("relative path");for(var t=e.substring(1).split("/"),o=[];t.length;){if((e=t.shift()).length&&0!=e.indexOf(".")){if(0<e.indexOf("=")){t.unshift(e);break}}else v("empty/relative directory");o.push(e)}e={};for(var i=0,s=t.length;i<s;++i){var r=t[i].split("="),n=decodeURIComponent(r[0]),a=decodeURIComponent(r[1]);2==r.length&&n&&a&&(e[n]=e[n]||a)}for(t="/"+o.join("/"),b.test(t)||v("invalid_prefix"),o=0,i=y.length;o<i;++o)y[o].test(t)&&v("invalid_prefix");return{pathPrefix:t,version:o=A(e,"k",!0),a:i=A(e,"am"),c:s=A(e,"rs"),f:e=A(e,"t")}},j=function(e){for(var t=[],o=0,i=e.length;o<i;++o){var s=e[o].replace(/\./g,"_").replace(/-/g,"_");k.test(s)&&t.push(s)}return t.join(",")},A=function(e,t,o){if(!(e=e[t])&&o&&v("missing: "+t),e){if(x.test(e))return e;v("invalid: "+t)}return null},C=/^https?:\/\/[a-z0-9_.-]+\.google(rs)?\.com(:\d+)?\/[a-zA-Z0-9_.,!=\-\/]+$/,P=/\/cb=/g,U=/\/\//g;_.m=function(e,t,o,i){return(e=e[0])||v("missing_hint"),"https://apis.google.com"+function(e,t,o,i){e=S(e),I.test(o)||v("invalid_callback"),t=j(t),i=i&&i.length?j(i):null;var s=function(e){return encodeURIComponent(e).replace(/%2C/g,",")};return[encodeURIComponent(e.pathPrefix).replace(/%2C/g,",").replace(/%2F/g,"/"),"/k=",s(e.version),"/m=",s(t),i?"/exm="+s(i):"","/rt=j/sv=1/d=1/ed=1",e.a?"/am="+s(e.a):"",e.c?"/rs="+s(e.c):"",e.f?"/t="+s(e.f):"","/cb=",s(o)].join("")}(e,t,o,i)};var $=decodeURI("%73cript"),O=/^[-+_0-9\/A-Za-z]+={0,2}$/,T=function(e,t){for(var o=[],i=0;i<e.length;++i){var s,r=e[i];if(s=r){e:{for(s=0;s<t.length;s++)if(t[s]===r)break e;s=-1}s=0>s}s&&o.push(r)}return o},N=function(){var t=e.nonce;if(void 0!==t)return t&&t===String(t)&&t.match(O)?t:e.nonce=null;var i=n(e,"us",[]);if(!i||!i.length)return e.nonce=null;for(var s=o.getElementsByTagName($),r=0,a=s.length;r<a;++r){var l=s[r];if(l.src&&(t=String(l.nonce||l.getAttribute("nonce")||"")||null)){for(var c=0,u=i.length;c<u&&i[c]!==l.src;++c);if(c!==u&&t&&t===String(t)&&t.match(O))return e.nonce=t}}return null},D=function(e){var t=o.createElement($);t.setAttribute("src",e),null!==(e=N())&&t.setAttribute("nonce",e),t.async="true",(e=o.getElementsByTagName($)[0])?e.parentNode.insertBefore(t,e):(o.head||o.body||o.documentElement).appendChild(t)},R=function(t,o){var i=o||{};"function"==typeof o&&((i={}).callback=o),function(e,t){var o=t&&t._c;if(o)for(var i=0;i<w.length;i++){var s=w[i][0],r=w[i][1];r&&Object.prototype.hasOwnProperty.call(o,s)&&r(o[s],e,t)}}(t,i),o=t?t.split(":"):[];var s=i.h||function(){var e=c();if(!e)throw Error("Bad hint");return e}(),r=n(e,"ah",a());if(r["::"]&&o.length){t=[];for(var l=null;l=o.shift();){var u=l.split(".");u=r[l]||r[u[1]&&"ns:"+u[0]||""]||s;var p=t.length&&t[t.length-1]||null,g=p;p&&p.hint==u||(g={hint:u,b:[]},t.push(g)),g.b.push(l)}var h=t.length;if(1<h){var d=i.callback;d&&(i.callback=function(){0==--h&&d()})}for(;o=t.shift();)z(o.b,i,o.hint)}else z(o||[],i,s)},z=function(i,r,p){i=function(e){e=e.sort();for(var t=[],o=void 0,i=0;i<e.length;i++){var s=e[i];s!=o&&t.push(s),o=s}return t}(i)||[];var g=r.callback,h=r.config,d=r.timeout,m=r.ontimeout,w=r.onerror,b=void 0;"function"==typeof w&&(b=w);var y=null,x=!1;if(d&&!m||!d&&m)throw"Timeout requires both the timeout parameter and ontimeout parameter to be set";w=n(u(p),"r",[]).sort();var I=n(u(p),"L",[]).sort(),k=[].concat(w),S=function(o,i){if(x)return 0;t.clearTimeout(y),I.push.apply(I,Z);var s,r,g=((l||{}).config||{}).update;if(g?g(h):h&&n(e,"cu",[]).push(h),i){f("me0",o,k);try{s=i,r=p,E(function(){var e=r===c()?n(l,"_",a()):a();e=n(u(r),"_",e),s(e)},b)}finally{f("me1",o,k)}}return 1};0<d&&(y=t.setTimeout(function(){x=!0,m()},d));var j,A,O,R,z,G,L,B,Z=T(i,I);if(Z.length){Z=T(i,w);var V=n(e,"CP",[]),Q=V.length;if(V[Q]=function(t){if(!t)return 0;f("ml1",Z,k);var o=function(o){V[Q]=null,S(Z,t)&&function(t){var o=n(e,"PQ",[]);e.PQ=[];var i=o.length;if(0===i)t();else for(var s=0,r=function(){++s===i&&t()},a=0;a<i;a++)o[a](r)}(function(){g&&g(),o()})},i=function(){var e=V[Q+1];e&&e()};0<Q&&V[Q-1]?V[Q]=function(){o(i)}:o(i)},Z.length){var Y="loaded_"+e.I++;l[Y]=function(e){V[Q](e),l[Y]=null},A=Z,O="gapi."+Y,R=w,z=(j=p).split(";"),G=z.shift(),L=_[G],B=null,L?B=L(z,A,O,R):v("no hint processor for: "+G),B||v("failed to generate load url"),O=(A=B).match(U),(R=A.match(P))&&1===R.length&&C.test(A)&&O&&1===O.length||v("failed sanity: "+j),i=B,w.push.apply(w,Z),f("ml0",Z,k),r.sync||t.___gapisync?function(e){if("loading"!=o.readyState)D(e);else{var t=N(),i="";null!==t&&(i=' nonce="'+t+'"'),o.write("<"+$+' src="'+encodeURI(e)+'"'+i+"></"+$+">")}}(i):D(i)}else V[Q](s)}else S(Z)&&g&&g()},E=function(t,o){if(e.hee&&0<e.hel)try{return t()}catch(t){o&&o(t),e.hel--,R("debug_error",function(){try{window.___jsl.hefn(t)}catch(e){throw t}})}else try{return t()}catch(e){throw o&&o(e),e}};l.load=function(e,t){return E(function(){return R(e,t)})},g.bs0=window.gapi._bs||(new Date).getTime(),d("bs0"),g.bs1=(new Date).getTime(),d("bs1"),delete window.gapi._bs}.call(window),t.load("",{callback:window.gapi_onload,_c:{jsl:{ci:{deviceType:"desktop","oauth-flow":{authUrl:"https://accounts.google.com/o/oauth2/auth",proxyUrl:"https://accounts.google.com/o/oauth2/postmessageRelay",disableOpt:!0,idpIframeUrl:"https://accounts.google.com/o/oauth2/iframe",usegapi:!1},debug:{reportExceptionRate:.05,forceIm:!1,rethrowException:!1,host:"https://apis.google.com"},enableMultilogin:!0,"googleapis.config":{auth:{useFirstPartyAuthV2:!0}},isPlusUser:!0,inline:{css:1},disableRealtimeCallback:!1,drive_share:{skipInitCommand:!0},csi:{rate:.01},client:{cors:!1},isLoggedIn:!0,signInDeprecation:{rate:0},include_granted_scopes:!0,llang:"en",iframes:{ytsubscribe:{url:"https://www.youtube.com/subscribe_embed?usegapi=1"},plus_share:{params:{url:""},url:":socialhost:/:session_prefix::se:_/+1/sharebutton?plusShare=true&usegapi=1"},":source:":"3p",playemm:{url:"https://play.google.com/work/embedded/search?usegapi=1&usegapi=1"},partnersbadge:{url:"https://www.gstatic.com/partners/badge/templates/badge.html?usegapi=1"},dataconnector:{url:"https://dataconnector.corp.google.com/:session_prefix:ui/widgetview?usegapi=1"},shortlists:{url:""},plus_followers:{params:{url:""},url:":socialhost:/_/im/_/widget/render/plus/followers?usegapi=1"},post:{params:{url:""},url:":socialhost:/:session_prefix::im_prefix:_/widget/render/post?usegapi=1"},signin:{params:{url:""},url:":socialhost:/:session_prefix:_/widget/render/signin?usegapi=1",methods:["onauth"]},donation:{url:"https://onetoday.google.com/home/donationWidget?usegapi=1"},plusone:{params:{count:"",size:"",url:""},url:":socialhost:/:session_prefix::se:_/+1/fastbutton?usegapi=1"},":im_socialhost:":"https://plus.googleapis.com",backdrop:{url:"https://clients3.google.com/cast/chromecast/home/widget/backdrop?usegapi=1"},visibility:{params:{url:""},url:":socialhost:/:session_prefix:_/widget/render/visibility?usegapi=1"},additnow:{url:"https://apis.google.com/additnow/additnow.html?usegapi=1",methods:["launchurl"]},":signuphost:":"https://plus.google.com",community:{url:":ctx_socialhost:/:session_prefix::im_prefix:_/widget/render/community?usegapi=1"},plus:{url:":socialhost:/:session_prefix:_/widget/render/badge?usegapi=1"},commentcount:{url:":socialhost:/:session_prefix:_/widget/render/commentcount?usegapi=1"},zoomableimage:{url:"https://ssl.gstatic.com/microscope/embed/"},appfinder:{url:"https://gsuite.google.com/:session_prefix:marketplace/appfinder?usegapi=1"},person:{url:":socialhost:/:session_prefix:_/widget/render/person?usegapi=1"},savetodrive:{url:"https://drive.google.com/savetodrivebutton?usegapi=1",methods:["save"]},page:{url:":socialhost:/:session_prefix:_/widget/render/page?usegapi=1"},card:{url:":socialhost:/:session_prefix:_/hovercard/card"},youtube:{params:{location:["search","hash"]},url:":socialhost:/:session_prefix:_/widget/render/youtube?usegapi=1",methods:["scroll","openwindow"]},plus_circle:{params:{url:""},url:":socialhost:/:session_prefix::se:_/widget/plus/circle?usegapi=1"},rbr_s:{params:{url:""},url:":socialhost:/:session_prefix::se:_/widget/render/recobarsimplescroller"},udc_webconsentflow:{params:{url:""},url:"https://myaccount.google.com/webconsent?usegapi=1"},savetoandroidpay:{url:"https://androidpay.google.com/a/widget/save"},blogger:{params:{location:["search","hash"]},url:":socialhost:/:session_prefix:_/widget/render/blogger?usegapi=1",methods:["scroll","openwindow"]},evwidget:{params:{url:""},url:":socialhost:/:session_prefix:_/events/widget?usegapi=1"},surveyoptin:{url:"https://www.google.com/shopping/customerreviews/optin?usegapi=1"},":socialhost:":"https://apis.google.com",hangout:{url:"https://talkgadget.google.com/:session_prefix:talkgadget/_/widget"},":gplus_url:":"https://plus.google.com",rbr_i:{params:{url:""},url:":socialhost:/:session_prefix::se:_/widget/render/recobarinvitation"},share:{url:":socialhost:/:session_prefix::im_prefix:_/widget/render/share?usegapi=1"},comments:{params:{location:["search","hash"]},url:":socialhost:/:session_prefix:_/widget/render/comments?usegapi=1",methods:["scroll","openwindow"]},autocomplete:{params:{url:""},url:":socialhost:/:session_prefix:_/widget/render/autocomplete"},ratingbadge:{url:"https://www.google.com/shopping/customerreviews/badge?usegapi=1"},appcirclepicker:{url:":socialhost:/:session_prefix:_/widget/render/appcirclepicker"},follow:{url:":socialhost:/:session_prefix:_/widget/render/follow?usegapi=1"},sharetoclassroom:{url:"https://www.gstatic.com/classroom/sharewidget/widget_stable.html?usegapi=1"},ytshare:{params:{url:""},url:":socialhost:/:session_prefix:_/widget/render/ytshare?usegapi=1"},family_creation:{params:{url:""},url:"https://families.google.com/webcreation?usegapi=1&usegapi=1"},configurator:{url:":socialhost:/:session_prefix:_/plusbuttonconfigurator?usegapi=1"},savetowallet:{url:"https://androidpay.google.com/a/widget/save"}}},h:"m;/_/scs/apps-static/_/js/k=oz.gapi.en_GB.ubKYouqhKX4.O/m=__features__/am=AQ/rt=j/d=1/rs=AGLTcCOGNSYHXTxYr4NY7kgcmkLAdaQXpA",u:"https://apis.google.com/js/api.js",hee:!0,fp:"8ec6a42874d030a86e760e43ec19a2cd1b523c38",dpo:!1},fp:"8ec6a42874d030a86e760e43ec19a2cd1b523c38",annotation:["interactivepost","recobar","signin2","autocomplete","profile"],bimodal:["signin","share"]}});var o=function(){this.authenticated=this.isAuthenticated(),this.authInstance=null,this.login=this.login.bind(this),this.setSession=this.setSession.bind(this),this.logout=this.logout.bind(this),this.isAuthenticated=this.isAuthenticated.bind(this)};o.prototype.login=function(e){return this.authInstance.signIn().then(this.setSession)},o.prototype.logout=function(e){this.authInstance.signOut(function(e){return console.log(e)}),localStorage.clear(),this.authenticated=!1},o.prototype.setSession=function(e){console.log(e);var t=this.authInstance.currentUser.get().getBasicProfile(),o=e.Zi,i=JSON.stringify(1e3*o.expires_in+(new Date).getTime());localStorage.setItem("access_token",o.access_token),localStorage.setItem("id_token",o.id_token),localStorage.setItem("expires_at",i),this.authenticated=!0,localStorage.setItem("id",t.getId()),localStorage.setItem("full_name",t.getName()),localStorage.setItem("first_name",t.getGivenName()),localStorage.setItem("last_name",t.getFamilyName()),localStorage.setItem("image_url",t.getImageUrl()),localStorage.setItem("email",t.getEmail())},o.prototype.isAuthenticated=function(){var e=JSON.parse(localStorage.getItem("expires_at"));return(new Date).getTime()<e},o.prototype.getUserData=function(){return{firstName:localStorage.getItem("first_name"),lastName:localStorage.getItem("last_name"),email:localStorage.getItem("email")}};var i=new o,s=i.login,r=i.logout,n=i.isAuthenticated,a=i.getUserData,l={install:function(e,o){e.gapiLoadClientPromise=null;e.prototype.$getGapiClient=function(){return new Promise(function(s,r){var n;e.gapiLoadClientPromise&&0===e.gapiLoadClientPromise.status?(console.log("promise is being executed, resolving promise itself"),s(e.gapiLoadClientPromise)):(n=s,t.auth?n(t):(e.initialisationInProgress=!0,t.load("client:auth2",function(){e.gapiLoadClientPromise=t.client.init(o).then(function(){console.info("gapi client initialised."),i.authInstance=t.auth2.getAuthInstance(),n(t)})})))})},e.prototype.$login=function(){return e.prototype.$getGapiClient().then(s)},e.prototype.$logout=function(){return e.prototype.$getGapiClient().then(r)},e.prototype.$isAuthenticated=n,e.prototype.$getUserData=a}};function c(e,t){e.use(l,t)}"undefined"!=typeof window&&window.Vue&&window.Vue.use(c);e.default=c,e.version="0.0.1",Object.defineProperty(e,"__esModule",{value:!0})});